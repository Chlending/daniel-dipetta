document.querySelectorAll("#listprice , #loantype , #numberofunit , #downpayment , #rate").forEach(e=>e.addEventListener("input",()=>calculate()));var loantypee=document.getElementById("loantype"),purchase=document.getElementById("listprice");loantypee.addEventListener("change",updateDownpaymentOptions);function updateDownpaymentOptions(){downpayment.innerHTML="";switch(loantypee.value){case"CONVENTIONAL":downpayment.innerHTML+='<option value="3">3%</option>';downpayment.innerHTML+='<option value="5">5%</option>';downpayment.innerHTML+='<option value="10">10%</option>';downpayment.innerHTML+='<option value="15">15%</option>';downpayment.innerHTML+='<option value="20">20%</option>';downpayment.innerHTML+='<option value="25">25%</option>';break;case"FHA":downpayment.innerHTML+='<option value="3.5">3.5%</option>';downpayment.innerHTML+='<option value="5">5%</option>';downpayment.innerHTML+='<option value="10">10%</option>';break;case"VA":downpayment.innerHTML+='<option value="0">0%</option>';downpayment.innerHTML+='<option value="5">5%</option>';downpayment.innerHTML+='<option value="10">10%</option>';downpayment.innerHTML+='<option value="20">20%</option>';break;case"USDA":downpayment.innerHTML+='<option value="0">0%</option>';break}calculate()}function calculate(){const e=Number(document.getElementById("listprice").value),t=document.getElementById("loantype").value,n=Number(document.getElementById("downpayment").value)/100,o=Number(document.getElementById("rate").value)/100;var l,a=calculatebuydownRate(o/12,360,e*(1-n),0,0);l=0===o?0:o-.01;var d=calculatebuydownRate((o-.01)/12,360,e*(1-n),0,0),r=(a-d)*12;document.getElementById("pandi").textContent=formatValue(a),document.getElementById("buydownRate").textContent=formatValue(100*l)+"%",document.getElementById("pandi-first").textContent=formatValue(d),document.getElementById("pandi-left").textContent=formatValue(a),document.getElementById("savings").textContent=formatValue(r),document.getElementById("closing-cost").textContent=formatValue(5e3-r)}function num(e){e=e||window.event;var t=e.which?e.which:e.keyCode;return 46==t?-1===e.target.value.indexOf("."):!(t>31&&(t<48||t>57))}function formatValue(e,t){return isNaN(e)?t||"N/A":Form.format(e)}var Form=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});function calculatebuydownRate(e,t,n){var o=e,l=o*n,a=1-Math.pow(1+o,-t);return l/a}
