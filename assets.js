document.querySelectorAll("#listprice , #loantype , #numberofunit , #downpayment , #rate").forEach(e=>e.addEventListener("input",()=>calculate()));var loantypee=document.getElementById("loantype"),purchase=document.getElementById("listprice");function updateDownpaymentOptions(){downpayment.innerHTML="";let e=document.getElementById("energyCreditInfo");switch(loantypee.value){case"CONVENTIONAL":downpayment.innerHTML+='<option value="3">3%</option>',downpayment.innerHTML+='<option value="5">5%</option>',downpayment.innerHTML+='<option value="10">10%</option>',downpayment.innerHTML+='<option value="15">15%</option>',downpayment.innerHTML+='<option value="20">20%</option>',downpayment.innerHTML+='<option value="25">25%</option>';break;case"FHA":downpayment.innerHTML+='<option value="3.5">3.5%</option>',downpayment.innerHTML+='<option value="5">5%</option>',downpayment.innerHTML+='<option value="10">10%</option>',e.style.display="block";break;case"VA":downpayment.innerHTML+='<option value="0">0%</option>',downpayment.innerHTML+='<option value="5">5%</option>',downpayment.innerHTML+='<option value="10">10%</option>',downpayment.innerHTML+='<option value="20">20%</option>';break;case"USDA":downpayment.innerHTML+='<option value="0">0%</option>'}"FHA"!==loantypee.value&&(e.style.display="none"),calculate()}function calculate(){let e=Number(document.getElementById("listprice").value),t=(document.getElementById("loantype").value,Number(document.getElementById("downpayment").value)/100),n=Number(document.getElementById("rate").value)/100,o=calculateAmount(e,t);document.getElementById("energyCreditAmount").textContent=o.toLocaleString();var a,i=calculatebuydownRate(n/12,360,e*(1-t),0,0);a=0===n?0:n-.01;var l=calculatebuydownRate((n-.01)/12,360,e*(1-t),0,0),r=(i-l)*12;document.getElementById("pandi").textContent=formatValue(i),document.getElementById("buydownRate").textContent=formatValue(100*a)+"%",document.getElementById("pandi-first").textContent=formatValue(l),document.getElementById("pandi-left").textContent=formatValue(i),document.getElementById("savings").textContent=formatValue(r),document.getElementById("closing-cost").textContent=formatValue(5e3-r)}function num(e){var t=(e=e||window.event).which?e.which:e.keyCode;return 46==t?-1===e.target.value.indexOf("."):!(t>31&&(t<48||t>57))}function formatValue(e,t){return isNaN(e)?t||"N/A":Form.format(e)}loantypee.addEventListener("change",updateDownpaymentOptions);var Form=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});function calculatebuydownRate(e,t,n){var o=e;return o*n/(1-Math.pow(1+o,-t))}const calculateAmount=(e,t)=>{console.log("incoming numbers",e,t);let n=e*t;return n>13e3?13e3:n};
